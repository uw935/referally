![Картинка о продукте](../assets/github-guides-cover.png "Дизайн от Марка")

# Технические характеристики бота
1. Бот написан на `Python 3.11.9`, но работает точно работает с `3.9+`
2. Использует `PosgtreSQL 16+` в качестве базы данных _(другие версии не тестировались, может быть и с ними норм)_

# Как установить бота?
**Для установки бота, потребуется**
1. Данные от развернутого PostgreSQL-сервера
2. Установленный Docker
```bash
sudo apt-get install docker
```

**Шаги для установки**
0. Пожалуйста, убедись, что бот добавлен в канал администратором и что у него есть возможность `Добавлять новых участников`

1. Скопировать проект локально
```bash
git clone https://github.com/uw935/referally.git
```

2. Настроить переменные окружения
```bash
rn .env-example .env
vim .env
```
```env
DB_HOST="" # хост для подключения. IP или домен
DB_PORT="5432" # порт
DB_USER="" # пользователь в БД
DB_PASSWORD="" # пароль от базы данных
DB_NAME="" # название базы данных

BOT_TOKEN="" # токен бота из @BotFather в Телеграм
TELEGRAM_ADMIN_ID="" # твой Telegram ID (можно взять с @getmyid_bot)
DEFAULT_LANG="ru" # язык по умолчанию в формате ISO 639-1
CHANNEL_ID="" # Telegram ID канала, его тоже можно взять с @getmyid_bot, переслав оттуда любое сообщение
```

3. Запустить docker-compose
```bash
docker-compose up --build bot
```

Ура, готово!

# Что делать дальше?
Бот запущен, ты, как администратор теперь спокойно можешь запускать партнерскую программу в своем канале. 

1. Подписанные на канал пользователи смогут получить реферальные ссылки после команды /start
2. Когда кто-то придет по их ссылке, пройдет капчу и подпишется на канал — он будет считаться их рефералом (+1)
3. Если он отпишется, будет -1 реферал
4. Реферальный пользователь (который пришел от кого-то) тоже может получить свою реферальную ссылку. Для этого ему нужно подписаться на канал после капчи

# Как настроить тексты?
**Здесь собрана основная информация про тексты**
1. Тексты расположены в папке `/localizations/`
2. Название каждого файла содержит код языка в `ISO 639-1` формате (который использует Телеграм)
3. Можно удалить любой файл, главное не удалять тот, что указан в `DEFAULT_LANG` в `.env`
4. Пожалуйста, соблюдайте [Telegram MarkdownV2](https://core.telegram.org/bots/api#markdownv2-style), иначе будут выходить ошибки
5. Переменные в текстах можно удалять, но __ни в коем случае__ не редактировать их названия
